function r(t){var e=Array.isArray(t)?[]:{};for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];e[n]="object"==typeof o?r(o):o}return e}var t=function(){function t(){this.__funcs=[],this.__data=[],this.__propKey="setting",this.use=this.use.bind(this),this.gen=this.gen.bind(this)}return t.prototype.setv=function(r,t){var e=r.length-1;r.reduce((function(r,n,o){return o===e&&(r[n]=t),r[n]}),this.__data)},t.prototype.addChild=function(t,e,n,o){var a=o.at||0;n--;for(var i=function(i,f){var c=t[i];o.renew&&a===n&&(c=Object.assign?Object.assign(c,o.renew):function(r,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r}(c,o.renew)),o.remove&&a===n&&o.remove.forEach((function(r){c.hasOwnProperty(r)&&delete c[r]})),n>0&&!c.hasOwnProperty(e)&&(c[e]=r(t),s.addChild(c[e],e,n,o))},s=this,f=0,c=t.length;f<c;f++)i(f);return t},t.prototype.transform=function(t,e){if(e){var n=function(r){var t=1;return"number"==typeof r?t=r:Array.isArray(r)&&"number"==typeof r[0]&&"number"==typeof r[1]&&(t=~~(Math.random()*(r[1]-r[0])+r[0])),t},o="number"==typeof e||Array.isArray(e)&&"number"==typeof e[0]&&"number"==typeof e[1]?n(e):"object"==typeof e&&e.length?n(e.length):1,a=new Array(o);delete t[this.__propKey];for(var i=0;i<o;i++)a[i]=r(t);if("object"!=typeof e||"number"==typeof e||Array.isArray(e))t=a;else{var s="number"==typeof e.level?e.level:1,f=e.key||"children";if(e.at&&e.at>=s)throw new Error('setting "at" out of range!');f&&(t[f]=this.addChild(a,f,s,e))}}return t},t.prototype.parseBlock=function(){var r=this,t=function(e,n){var o,a;!Array.isArray(e)&&e.hasOwnProperty(r.__propKey)&&(a=(o=e)[r.__propKey],e=o=r.transform(o,a),n?r.setv(n,e):r.setv([],r.__data=e));var i=function(r){if(e.hasOwnProperty(r)){var o=e[r];Array.isArray(o)&&"▒"!==o[0]?o.forEach((function(e,o){return t(e,n?n.concat([r,o]):[r,o])})):Array.isArray(o)||"object"!=typeof o||t(o,n?n.concat([r]):[r])}};for(var s in e)i(s)};t(this.__data)},t.prototype.setValues=function(r,t){var e=this;if(Array.isArray(r))if("▒"===r[0]){var n=t||[],o=this.__funcs[r[1]].concat();try{this.setv(n,o.length>0?o[0].apply(o,o[1]):r)}catch(t){throw new Error((n.length>0?n.join("."):r)+": error, "+t)}}else r.forEach((function(r,n){return e.setValues(r,t?t.concat([n]):[n])}));else"object"==typeof r&&Object.keys(r).forEach((function(n){return e.setValues(r[n],t?t.concat([n]):[n])}))},t.prototype.use=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return["▒",this.__funcs.push([r,t])-1]},t.prototype.gen=function(r,t){if("object"==typeof r)return t&&(this.__propKey=t),this.__data=r,this.parseBlock(),this.setValues(this.__data),this.__data},t}();export default t;
//# sourceMappingURL=shai.js.map
